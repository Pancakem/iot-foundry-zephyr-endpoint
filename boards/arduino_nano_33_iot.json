{
  "capabilities": {
    "device": "Arduino_Nano_33_IoT",
    "pins": ["PA0", "PA1", "PA2", "PA3", "PA4", "PA5", "PB0", "PB1", "PB2", "PC0", "PC1"],
    "channels": [
      {
        "name": "DI_Interlock",
        "type": "digital_in",
        "description": "Global Interlock",
        "maxValueAtPin": 3.3,
        "minValueAtPin": 0.0,
        "precision": 0,
        "accuracy": 0.0,
        "pins": [{ "name": "PA0", "function": "Digital Input" }]
      },
      {
        "name": "DI_Trigger",
        "type": "digital_in",
        "description": "Trigger Input",
        "maxValueAtPin": 3.3,
        "minValueAtPin": 0.0,
        "precision": 0,
        "accuracy": 0.0,
        "pins": [{ "name": "PA1", "function": "Digital Input" }]
      },
      {
        "name": "DI_PosLimit",
        "type": "digital_in",
        "description": "Positive Limit Switch",
        "maxValueAtPin": 3.3,
        "minValueAtPin": 0.0,
        "precision": 0,
        "accuracy": 0.0,
        "pins": [{ "name": "PA2", "function": "Digital Input" }]
      },
      {
        "name": "DI_NegLimit",
        "type": "digital_in",
        "description": "Negative Limit Switch",
        "maxValueAtPin": 3.3,
        "minValueAtPin": 0.0,
        "precision": 0,
        "accuracy": 0.0,
        "pins": [{ "name": "PA3", "function": "Digital Input" }]
      },
      {
        "name": "QE_Position",
        "type": "quadrature_in",
        "description": "Quadrature Encoder for Position",
        "maxValueAtPin": 3.3,
        "minValueAtPin": 0.0,
        "precision": 0,
        "accuracy": 0.01,
        "pins": [
          { "name": "PA4", "function": "Encoder A" },
          { "name": "PA5", "function": "Encoder B" }
        ]
      },
      {
        "name": "DO_Interlock",
        "type": "digital_out",
        "description": "Global Interlock Output",
        "maxValueAtPin": 3.3,
        "minValueAtPin": 0.0,
        "precision": 0,
        "accuracy": 0.0,
        "pins": [{ "name": "PB0", "function": "Digital Output" }]
      },
      {
        "name": "DO_Trigger",
        "type": "digital_out",
        "description": "Trigger Output",
        "maxValueAtPin": 3.3,
        "minValueAtPin": 0.0,
        "precision": 0,
        "accuracy": 0.0,
        "pins": [{ "name": "PB1", "function": "Digital Output" }]
      },
      {
        "name": "DO_Brake",
        "type": "digital_out",
        "description": "Motor Brake Control",
        "maxValueAtPin": 24.0,
        "minValueAtPin": 0.0,
        "precision": 0,
        "accuracy": 0.0,
        "pins": [{ "name": "PB2", "function": "Digital Output" }]
      },
      {
        "name": "PWM_MotorCtrl",
        "type": "pwm_out",
        "description": "Motor PWM Control",
        "maxValueAtPin": 100.0,
        "minValueAtPin": 0.0,
        "precision": 16,
        "accuracy": 0.5,
        "pins": [{ "name": "PC0", "function": "PWM Output" }]
      }
    ]
  },
  "configuration": {
    "maxFruBytes": 2048,
    "fruRecords": [
      {
        "vendorIANA": 412,
        "required": true,
        "description": "Device FRU Information",
        "fields": [
          {
            "type": 5,
            "required": true,
            "description": "Manufacturer",
            "format": "string",
            "length": null,
            "value": "Arduino LLC"
          },
          {
            "type": 2,
            "required": true,
            "description": "Model",
            "format": "string",
            "length": null,
            "value": "Profiled Motion Controller"
          },
          {
            "type": 3,
            "required": true,
            "description": "Part Number",
            "format": "string",
            "length": null,
            "value": "ABX00032"
          },
          {
            "type": 4,
            "required": true,
            "description": "Serial Number",
            "format": "string",
            "length": null,
            "value": "1001-1000-0001"
          },
          {
            "type": 10,
            "required": false,
            "description": "Version",
            "format": "string",
            "length": null,
            "value": "v1.0"
          }
        ]
      }
    ],
    "logicalEntities": [
      {
        "entityVendorIANA": 12634,
        "vendorEntityID": 3,
        "name": "Profiled",
        "required": true,
        "description": "Profiled Motion Controller Endpoint",
        "ioBindings": [
          {
            "bindingType": "stateSensor",
            "name": "GlobalInterlockSensor",
            "includeInPdr": true,
            "required": true,
            "description": null,
            "isVirtual": false,
            "sensorID": 1,
            "allowedInterfaceTypes": ["digital_in"],
            "boundChannel": "DI_Interlock",
            "stateSetVendorIANA": 412,
            "stateSetVendor": 412,
            "stateSet": 96,
            "possibleStates": 3,
            "usedStates": 3,
            "stateWhenHigh": 1,
            "stateWhenLow": 2,
            "defaultState": null
          },
          {
            "bindingType": "stateEffecter",
            "name": "GlobalInterlockEffecter",
            "includeInPdr": true,
            "required": true,
            "description": null,
            "isVirtual": false,
            "effecterID": 1,
            "allowedInterfaceTypes": ["digital_out"],
            "boundChannel": "DO_Interlock",
            "stateSetVendorIANA": 412,
            "stateSetVendor": 412,
            "stateSet": 96,
            "possibleStates": 3,
            "usedStates": 3,
            "stateWhenHigh": 1,
            "stateWhenLow": 2,
            "defaultState": 2
          },
          {
            "bindingType": "stateSensor",
            "name": "TriggerSensor",
            "includeInPdr": true,
            "required": true,
            "description": null,
            "isVirtual": false,
            "sensorID": 2,
            "allowedInterfaceTypes": ["digital_in"],
            "boundChannel": "DI_Trigger",
            "stateSetVendorIANA": 12634,
            "stateSetVendor": 12634,
            "stateSet": 24576,
            "possibleStates": 3,
            "usedStates": 3,
            "stateWhenHigh": 1,
            "stateWhenLow": 2,
            "defaultState": null
          },
          {
            "bindingType": "stateEffecter",
            "name": "TriggerEffecter",
            "includeInPdr": true,
            "required": true,
            "description": null,
            "isVirtual": false,
            "effecterID": 2,
            "allowedInterfaceTypes": ["digital_out"],
            "boundChannel": "DO_Trigger",
            "stateSetVendorIANA": 12634,
            "stateSetVendor": 12634,
            "stateSet": 24576,
            "possibleStates": 3,
            "usedStates": 3,
            "stateWhenHigh": 1,
            "stateWhenLow": 2,
            "defaultState": 2
          },
          {
            "bindingType": "numericSensor",
            "name": "PositionSensor",
            "includeInPdr": true,
            "required": true,
            "description": "Motor position feedback",
            "isVirtual": true,
            "sensorID": 7,
            "allowedInterfaceTypes": [],
            "boundChannel": null,
            "sensor": null,
            "inputCurve": null,
            "inputGearingRatio": 0.0001,
            "physicalBaseUnit": 38,
            "physicalUnitModifier": 0,
            "physicalRateUnit": 0,
            "physicalAuxUnit": 0,
            "physicalAuxUnitModifier": 0,
            "physicalAuxRateUnit": 0,
            "rel": null,
            "normalMax": 2000000000,
            "normalMin": -2000000000,
            "upperThresholdWarning": null,
            "upperThresholdCritical": 100000.0,
            "upperThresholdFatal": 2000000000.0,
            "lowerThresholdWarning": null,
            "lowerThresholdCritical": -100000.0,
            "lowerThresholdFatal": -2000000000.0
          },
          {
            "bindingType": "stateSensor",
            "name": "PositiveLimit",
            "includeInPdr": true,
            "required": false,
            "description": "Positive limit switch",
            "isVirtual": false,
            "sensorID": 8,
            "allowedInterfaceTypes": ["digital_in"],
            "boundChannel": "DI_PosLimit",
            "stateSetVendorIANA": 412,
            "stateSetVendor": 412,
            "stateSet": 67,
            "possibleStates": 3,
            "usedStates": 3,
            "stateWhenHigh": 1,
            "stateWhenLow": 0,
            "defaultState": null
          },
          {
            "bindingType": "stateSensor",
            "name": "NegativeLimit",
            "includeInPdr": true,
            "required": false,
            "description": "Negative limit switch",
            "isVirtual": false,
            "sensorID": 9,
            "allowedInterfaceTypes": ["digital_in"],
            "boundChannel": "DI_NegLimit",
            "stateSetVendorIANA": 412,
            "stateSetVendor": 412,
            "stateSet": 67,
            "possibleStates": 3,
            "usedStates": 3,
            "stateWhenHigh": 1,
            "stateWhenLow": 0,
            "defaultState": null
          },
          {
            "bindingType": "numericEffecter",
            "name": "OutputEffecter",
            "includeInPdr": false,
            "required": true,
            "description": "Motor control output",
            "isVirtual": false,
            "effecterID": null,
            "allowedInterfaceTypes": ["pwm_out"],
            "boundChannel": "PWM_MotorCtrl",
            "effecter": {
							"name":"stepper_nema34_4_6nm_200steps",
							"manufacturer":"BuildYourCNC.com",
							"partNumber":"85bygh450a-47-80",
							"description":"Motor, stepper, 4.6nm, nema 34, 200 steps per revolution",
							"supportedInterfaces":["step_dir_out"],
							"maxSampleRate":null,
							"baseUnit":38,
							"unitModifier":0,
							"rateUnit":0,
							"auxUnit":0,
							"auxUnitModifier":0,
							"rel":"multipledBy",
							"auxRateUnit":0,
							"plusAccuracy":0.005,
							"minusAccuracy":0.005,
							"inputUnits":"Counts",
							"responseCurve":[{"in":-6400,"out":-2},{"in":-3200,"out":-1},{"in":0,"out":0},{"in":3200,"out":1},{"in":6400,"out":2}],
							"ratedMax":null,
							"nominalValue":null
						},
						"outputCurve":[{"in":-6400,"out":-2},{"in":-3200,"out":-1},{"in":0,"out":0},{"in":3200,"out":1},{"in":6400,"out":2}],
            "outputGearingRatio": 1.0,
            "physicalBaseUnit": 19,
            "physicalUnitModifier": 0,
            "physicalRateUnit": 0,
            "physicalAuxUnit": 0,
            "physicalAuxUnitModifier": 0,
            "physicalAuxRateUnit": 0,
            "rel": null,
            "physicalDefaultValue": 0.0
          },
          {
            "bindingType": "stateEffecter",
            "name": "BrakeEffecter",
            "includeInPdr": false,
            "required": false,
            "description": "Motor brake control",
            "isVirtual": false,
            "effecterID": null,
            "allowedInterfaceTypes": ["digital_out"],
            "boundChannel": "DO_Brake",
            "stateSetVendorIANA": 412,
            "stateSetVendor": 412,
            "stateSet": 259,
            "possibleStates": 3,
            "usedStates": 3,
            "stateWhenHigh": 1,
            "stateWhenLow": 0,
            "defaultState": 0
          },
          {
            "bindingType": "stateEffecter",
            "name": "Command",
            "includeInPdr": true,
            "required": true,
            "description": "Motion command",
            "isVirtual": true,
            "effecterID": 3,
            "allowedInterfaceTypes": [],
            "boundChannel": null,
            "stateSetVendorIANA": 12634,
            "stateSetVendor": 12634,
            "stateSet": 24578,
            "possibleStates": 7,
            "usedStates": 7,
            "stateWhenHigh": null,
            "stateWhenLow": null,
            "defaultState": 2
          },
          {
            "bindingType": "stateSensor",
            "name": "MotionState",
            "includeInPdr": true,
            "required": true,
            "description": "Motion state",
            "isVirtual": true,
            "sensorID": 3,
            "allowedInterfaceTypes": [],
            "boundChannel": null,
            "stateSetVendorIANA": 12634,
            "stateSetVendor": 12634,
            "stateSet": 24577,
            "possibleStates": 127,
            "usedStates": 127,
            "stateWhenHigh": null,
            "stateWhenLow": null,
            "defaultState": null
          },
          {
            "bindingType": "numericSensor",
            "name": "VelocitySensor",
            "includeInPdr": true,
            "required": false,
            "description": "Velocity feedback (virtual)",
            "isVirtual": true,
            "sensorID": 6,
            "allowedInterfaceTypes": [],
            "boundChannel": null,
            "sensor": null,
            "inputCurve": null,
            "inputGearingRatio": 0.0001,
            "physicalBaseUnit": 38,
            "physicalUnitModifier": 0,
            "physicalRateUnit": 3,
            "physicalAuxUnit": 0,
            "physicalAuxUnitModifier": 0,
            "physicalAuxRateUnit": 0,
            "rel": "dividedBy",
            "normalMax": 100.0,
            "normalMin": -100.0,
            "upperThresholdWarning": null,
            "upperThresholdCritical": 150.0,
            "upperThresholdFatal": 200.0,
            "lowerThresholdWarning": null,
            "lowerThresholdCritical": -150.0,
            "lowerThresholdFatal": -200.0
          },
          {
            "bindingType": "numericSensor",
            "name": "Verror",
            "includeInPdr": true,
            "required": true,
            "description": "Velocity error",
            "isVirtual": true,
            "sensorID": 4,
            "allowedInterfaceTypes": [],
            "boundChannel": null,
            "sensor": null,
            "inputCurve": null,
            "inputGearingRatio": 0.0001,
            "physicalBaseUnit": 38,
            "physicalUnitModifier": 0,
            "physicalRateUnit": 3,
            "physicalAuxUnit": 0,
            "physicalAuxUnitModifier": 0,
            "physicalAuxRateUnit": 0,
            "rel": "dividedBy",
            "normalMax": 5.0,
            "normalMin": -5.0,
            "upperThresholdWarning": null,
            "upperThresholdCritical": 10.0,
            "upperThresholdFatal": 20.0,
            "lowerThresholdWarning": null,
            "lowerThresholdCritical": -10.0,
            "lowerThresholdFatal": -20.0
          },
          {
            "bindingType": "numericSensor",
            "name": "Perror",
            "includeInPdr": true,
            "required": true,
            "description": "Position error",
            "isVirtual": true,
            "sensorID": 5,
            "allowedInterfaceTypes": [],
            "boundChannel": null,
            "sensor": null,
            "inputCurve": null,
            "inputGearingRatio": 0.0001,
            "physicalBaseUnit": 38,
            "physicalUnitModifier": 0,
            "physicalRateUnit": 0,
            "physicalAuxUnit": 0,
            "physicalAuxUnitModifier": 0,
            "physicalAuxRateUnit": 0,
            "rel": null,
            "normalMax": 2.0,
            "normalMin": -2.0,
            "upperThresholdWarning": null,
            "upperThresholdCritical": 5.0,
            "upperThresholdFatal": 10.0,
            "lowerThresholdWarning": null,
            "lowerThresholdCritical": -5.0,
            "lowerThresholdFatal": -10.0
          },
          {
            "bindingType": "numericEffecter",
            "name": "Pfinal",
            "includeInPdr": true,
            "required": true,
            "description": "Final position setpoint",
            "isVirtual": true,
            "effecterID": 4,
            "allowedInterfaceTypes": [],
            "boundChannel": null,
            "effecter": null,
            "outputCurve": null,
            "outputGearingRatio": 0.0001,
            "physicalBaseUnit": 38,
            "physicalUnitModifier": 0,
            "physicalRateUnit": 0,
            "physicalAuxUnit": 0,
            "physicalAuxUnitModifier": 0,
            "physicalAuxRateUnit": 0,
            "rel": null,
            "physicalDefaultValue": 0.0
          },
          {
            "bindingType": "numericEffecter",
            "name": "Vprofile",
            "includeInPdr": true,
            "required": true,
            "description": "Profile velocity",
            "isVirtual": true,
            "effecterID": 5,
            "allowedInterfaceTypes": [],
            "boundChannel": null,
            "effecter": null,
            "outputCurve": null,
            "outputGearingRatio": 0.0001,
            "physicalBaseUnit": 38,
            "physicalUnitModifier": 0,
            "physicalRateUnit": 3,
            "physicalAuxUnit": 0,
            "physicalAuxUnitModifier": 0,
            "physicalAuxRateUnit": 0,
            "rel": "dividedBy",
            "physicalDefaultValue": 50.0
          },
          {
            "bindingType": "numericEffecter",
            "name": "Aprofile",
            "includeInPdr": true,
            "required": true,
            "description": "Profile acceleration",
            "isVirtual": true,
            "effecterID": 6,
            "allowedInterfaceTypes": [],
            "boundChannel": null,
            "effecter": null,
            "outputCurve": null,
            "outputGearingRatio": 0.0001,
            "physicalBaseUnit": 38,
            "physicalUnitModifier": 0,
            "physicalRateUnit": 3,
            "physicalAuxUnit": 0,
            "physicalAuxUnitModifier": 0,
            "physicalAuxRateUnit": 3,
            "rel": "dividedBy",
            "physicalDefaultValue": 100.0
          },
          {
            "bindingType": "numericEffecter",
            "name": "AccelerationGain",
            "includeInPdr": true,
            "required": false,
            "description": "Acceleration feedforward gain",
            "isVirtual": true,
            "effecterID": 7,
            "allowedInterfaceTypes": [],
            "boundChannel": null,
            "effecter": null,
            "outputCurve": null,
            "outputGearingRatio": 0.0001,
            "physicalBaseUnit": 0,
            "physicalUnitModifier": 0,
            "physicalRateUnit": 0,
            "physicalAuxUnit": 0,
            "physicalAuxUnitModifier": 0,
            "physicalAuxRateUnit": 0,
            "rel": null,
            "physicalDefaultValue": 0.5
          }
        ],
        "parameters": [
          {
            "parameterType": "real",
            "type": "real",
            "name": "SampleRate",
            "description": "Controller sample rate in Hz",
            "value": 1000.0,
            "defaultValue": 1000.0,
            "maxValue": 10000.0,
            "minValue": 100.0
          },
          {
            "parameterType": "enum",
            "type": "enum",
            "name": "OutputInIdle",
            "description": "Output behavior in Idle state",
            "value": "COAST",
            "defaultValue": "COAST",
            "choices": ["COAST", "HOLD", "BRAKE"]
          },
          {
            "parameterType": "enum",
            "type": "enum",
            "name": "OutputInConditionStop",
            "description": "Output behavior in ConditionStop state",
            "value": "BRAKE",
            "defaultValue": "BRAKE",
            "choices": ["COAST", "HOLD", "BRAKE"]
          },
          {
            "parameterType": "enum",
            "type": "enum",
            "name": "OutputInErrorStop",
            "description": "Output behavior in ErrorStop state",
            "value": "BRAKE",
            "defaultValue": "BRAKE",
            "choices": ["COAST", "HOLD", "BRAKE"]
          },
          {
            "parameterType": "real",
            "type": "real",
            "name": "DoneTimeConstant",
            "description": "Time to wait before Done transition (seconds)",
            "value": 0.5,
            "defaultValue": 0.5,
            "maxValue": 10.0,
            "minValue": 0.0
          },
          {
            "parameterType": "enum",
            "type": "enum",
            "name": "MotionProfile",
            "description": "Motion profile shape",
            "value": "Trapezoid",
            "defaultValue": "Trapezoid",
            "choices": ["Trapezoid", "S-Curve"]
          },
          {
            "parameterType": "real",
            "type": "real",
            "name": "PositionLoopLimit",
            "description": "Position loop limiter value",
            "value": 100.0,
            "defaultValue": 100.0,
            "maxValue": 1000.0,
            "minValue": 0.0
          },
          {
            "parameterType": "real",
            "type": "real",
            "name": "PositionProportionalGain",
            "description": "Position loop proportional gain",
            "value": 2.0,
            "defaultValue": 2.0,
            "maxValue": 100.0,
            "minValue": 0.0
          },
          {
            "parameterType": "real",
            "type": "real",
            "name": "VelocityProportionalGain",
            "description": "Velocity loop proportional gain",
            "value": 1.5,
            "defaultValue": 1.5,
            "maxValue": 100.0,
            "minValue": 0.0
          },
          {
            "parameterType": "real",
            "type": "real",
            "name": "VelocityIntegralGain",
            "description": "Velocity loop integral gain",
            "value": 0.2,
            "defaultValue": 0.2,
            "maxValue": 10.0,
            "minValue": 0.0
          },
          {
            "parameterType": "real",
            "type": "real",
            "name": "VelocityDifferentialGain",
            "description": "Velocity loop differential gain",
            "value": 0.05,
            "defaultValue": 0.05,
            "maxValue": 10.0,
            "minValue": 0.0
          },
          {
            "parameterType": "real",
            "type": "real",
            "name": "VelocityFFGain",
            "description": "Velocity feedforward gain",
            "value": 1.0,
            "defaultValue": 1.0,
            "maxValue": 10.0,
            "minValue": 0.0
          },
          {
            "parameterType": "real",
            "type": "real",
            "name": "OutputGain",
            "description": "Output scaling gain",
            "value": 1.0,
            "defaultValue": 1.0,
            "maxValue": 10.0,
            "minValue": 0.0
          }
        ]
      }
    ]
  },
  "oemStateSets": [
    {
      "name": "Trigger State Set",
      "vendorName": "PICMG",
      "vendorIANA": 12634,
      "stateSetID": 24576,
      "oemStateValueRecords": [
        {
          "minStateValue": 1,
          "maxStateValue": 1,
          "languageTags": ["en"],
          "stateName": ["Trigger Activated"]
        },
        {
          "minStateValue": 2,
          "maxStateValue": 2,
          "languageTags": ["en"],
          "stateName": ["Trigger Deactivated"]
        }
      ]
    },
    {
      "name": "Profiled Motion Controller State Set",
      "vendorName": "PICMG",
      "vendorIANA": 12634,
      "stateSetID": 24577,
      "oemStateValueRecords": [
        {
          "minStateValue": 1,
          "maxStateValue": 1,
          "languageTags": ["en"],
          "stateName": ["Idle"]
        },
        {
          "minStateValue": 2,
          "maxStateValue": 2,
          "languageTags": ["en"],
          "stateName": ["ConditionStop"]
        },
        {
          "minStateValue": 3,
          "maxStateValue": 3,
          "languageTags": ["en"],
          "stateName": ["ErrorStop"]
        },
        {
          "minStateValue": 4,
          "maxStateValue": 4,
          "languageTags": ["en"],
          "stateName": ["RunningV"]
        },
        {
          "minStateValue": 5,
          "maxStateValue": 5,
          "languageTags": ["en"],
          "stateName": ["RunningP"]
        },
        {
          "minStateValue": 6,
          "maxStateValue": 6,
          "languageTags": ["en"],
          "stateName": ["Waiting"]
        },
        {
          "minStateValue": 7,
          "maxStateValue": 7,
          "languageTags": ["en"],
          "stateName": ["Done"]
        }
      ]
    },
    {
      "name": "Profiled Motion Controller Command State Set",
      "vendorName": "PICMG",
      "vendorIANA": 12634,
      "stateSetID": 24578,
      "oemStateValueRecords": [
        {
          "minStateValue": 1,
          "maxStateValue": 1,
          "languageTags": ["en"],
          "stateName": ["Start"]
        },
        {
          "minStateValue": 2,
          "maxStateValue": 2,
          "languageTags": ["en"],
          "stateName": ["Stop"]
        },
        {
          "minStateValue": 3,
          "maxStateValue": 3,
          "languageTags": ["en"],
          "stateName": ["Wait"]
        }
      ]
    }
  ]
}
